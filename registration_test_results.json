{
  "summary": {
    "total_tests": 25,
    "passed_tests": 7,
    "failed_tests": 18,
    "success_rate": 28.000000000000004,
    "test_timestamp": "2025-08-17T23:31:53.820995",
    "registration_service_url": "http://localhost:8004",
    "main_backend_url": "https://signup-system-2.preview.emergentagent.com"
  },
  "test_results": [
    {
      "test": "Service Health Check",
      "success": true,
      "message": "Service healthy: healthy",
      "timestamp": "2025-08-17T23:31:52.579196",
      "details": {
        "database": "connected",
        "events": "connected",
        "dependencies": false,
        "configuration": {
          "min_age_provisional": 16.5,
          "min_age_class_b": 17,
          "min_age_class_c_ppv": 20,
          "weight_threshold_class_c": 7000,
          "max_document_size_mb": 5,
          "environment": "development"
        }
      }
    },
    {
      "test": "Configuration Endpoint",
      "success": true,
      "message": "Configuration retrieved successfully",
      "timestamp": "2025-08-17T23:31:52.581149",
      "details": {
        "min_age_provisional": 16.5,
        "min_age_class_b": 17,
        "min_age_class_c_ppv": 20,
        "weight_threshold_class_c": 7000,
        "document_formats": {
          "photo": [
            "jpeg",
            "jpg",
            "png"
          ],
          "id_proof": [
            "jpeg",
            "jpg",
            "png",
            "pdf"
          ],
          "medical": [
            "pdf"
          ],
          "other": [
            "pdf"
          ]
        }
      }
    },
    {
      "test": "Events Status Endpoint",
      "success": true,
      "message": "Events status retrieved successfully",
      "timestamp": "2025-08-17T23:31:52.582822",
      "details": {
        "event_service_connected": false,
        "fallback_events_count": 0,
        "has_fallback_events": false
      }
    },
    {
      "test": "Authentication - Missing Token",
      "success": true,
      "message": "Missing authorization properly rejected",
      "timestamp": "2025-08-17T23:31:52.585204",
      "details": {
        "status": 401
      }
    },
    {
      "test": "Authentication - Invalid Token Format",
      "success": true,
      "message": "Invalid token format properly rejected",
      "timestamp": "2025-08-17T23:31:52.587313",
      "details": {
        "status": 401
      }
    },
    {
      "test": "Direct Registration API - Class B Success",
      "success": false,
      "message": "Registration failed: External validation failed",
      "timestamp": "2025-08-17T23:31:52.664659",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Age Validation - Provisional - Valid Age (16.5+)",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:52.737730",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Age Validation - Provisional - Invalid Age (<16.5)",
      "success": false,
      "message": "Expected 400/422 but got 200",
      "timestamp": "2025-08-17T23:31:52.811979",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "Age Validation - Class B - Valid Age (17+)",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:52.882478",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Age Validation - Class B - Invalid Age (<17)",
      "success": false,
      "message": "Expected 400/422 but got 200",
      "timestamp": "2025-08-17T23:31:52.957468",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "Age Validation - Class C - Valid Age (20+)",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:53.033551",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Age Validation - Class C - Invalid Age (<20)",
      "success": false,
      "message": "Expected 400/422 but got 200",
      "timestamp": "2025-08-17T23:31:53.103972",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "Medical Certificate - Provisional - MC1 Required",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:53.177406",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Medical Certificate - Provisional - Missing MC1",
      "success": false,
      "message": "Expected 400/422 but got 200",
      "timestamp": "2025-08-17T23:31:53.249625",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "Medical Certificate - Class C - MC2 Required",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:53.321424",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Medical Certificate - Class C - Missing MC2",
      "success": false,
      "message": "Expected 400/422 but got 200",
      "timestamp": "2025-08-17T23:31:53.391831",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "Medical Certificate - Class B - No MC Required",
      "success": false,
      "message": "Expected success but got failure: External validation failed",
      "timestamp": "2025-08-17T23:31:53.467052",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Document Validation - Missing Required Documents",
      "success": true,
      "message": "Missing required documents properly rejected",
      "timestamp": "2025-08-17T23:31:53.469330",
      "details": {
        "status": 422
      }
    },
    {
      "test": "Document Validation - Oversized Document",
      "success": false,
      "message": "Expected 400/422, got 200",
      "timestamp": "2025-08-17T23:31:53.588796",
      "details": {
        "response": "{\"success\":false,\"registration\":null,\"message\":\"External validation failed\",\"validation_errors\":[\"Booking validation error: All connection attempts failed\",\"Receipt validation error: All connection attempts failed\"],\"driver_record_id\":null}"
      }
    },
    {
      "test": "External Service Validation",
      "success": true,
      "message": "External service validation handled gracefully with status 200",
      "timestamp": "2025-08-17T23:31:53.663206",
      "details": {
        "status": 200,
        "success": false,
        "message": "External validation failed"
      }
    },
    {
      "test": "Manager Override Functionality",
      "success": false,
      "message": "Manager override failed: External validation failed",
      "timestamp": "2025-08-17T23:31:53.737319",
      "details": {
        "success": false,
        "registration": null,
        "message": "External validation failed",
        "validation_errors": [
          "Booking validation error: All connection attempts failed",
          "Receipt validation error: All connection attempts failed"
        ],
        "driver_record_id": null
      }
    },
    {
      "test": "Registration Retrieval",
      "success": false,
      "message": "No registration ID provided",
      "timestamp": "2025-08-17T23:31:53.737385",
      "details": {}
    },
    {
      "test": "Main Backend Integration - Health Check",
      "success": false,
      "message": "Health check failed with status 502",
      "timestamp": "2025-08-17T23:31:53.797949",
      "details": {
        "response": ""
      }
    },
    {
      "test": "Main Backend Integration - Dependencies Check",
      "success": false,
      "message": "Dependencies check failed with status 502",
      "timestamp": "2025-08-17T23:31:53.809338",
      "details": {
        "response": ""
      }
    },
    {
      "test": "Main Backend Integration - Events Status",
      "success": false,
      "message": "Events status failed with status 502",
      "timestamp": "2025-08-17T23:31:53.820723",
      "details": {
        "response": ""
      }
    }
  ],
  "created_registrations": []
}